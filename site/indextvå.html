<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #343a40; /* Dark gray background */
            color: #d1d1d1; /* Light gray text color */
        }

        /* Navigation bar styles */
        .navbar {
            display: flex;
            justify-content: center;
            background-color: #212529; /* Darker background for navbar */
            padding: 10px 0;
            border-bottom: 2px solid #007bff; /* Blue underline for navbar */
        }
        .navbar a {
            color: #d1d1d1;
            text-decoration: none;
            margin: 0 15px;
            font-weight: bold;
            font-size: 16px;
        }
        .navbar a:hover {
            color: #007bff; /* Blue color for hover effect */
        }

        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }

        .leaderboard {
            margin-top: 20px;
            border-collapse: collapse;
            width: 100%;
        }
        .leaderboard th, .leaderboard td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            color: #d1d1d1;
            cursor: pointer; /* Makes the table header clickable */
        }
        .leaderboard th {
            background-color: #212529;
            color: white;
        }
        a {
            text-decoration: none;
            color: #007bff;
        }
        a:hover {
            text-decoration: underline;
        }
        .sort-icon {
            font-size: 12px;
            margin-left: 5px;
        }
        .asc::after {
            content: "↑"; /* Up arrow for ascending */
        }
        .desc::after {
            content: "↓"; /* Down arrow for descending */
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <div class="navbar">
        <a href="index.html">Leaderboard</a>
        <a href="tournaments.html">Tournaments</a>
        <a href="graphs.html">Graphs</a>
        <a href="faq.html">FAQ</a>
    </div>

    <!-- Content -->
    <div class="container">
        <h1>Leaderboard</h1>
        <table class="leaderboard" id="leaderboard">
            <thead>
                <tr>
                    <th onclick="sortTable(0)">Rank <span class="sort-icon"></span></th>
                    <th onclick="sortTable(1)">Player <span class="sort-icon"></span></th>
                    <th onclick="sortTable(2)">Rating <span class="sort-icon"></span></th>
                    <th onclick="sortTable(3)">RD <span class="sort-icon"></span></th>
                    <th onclick="sortTable(4)">WL Ratio <span class="sort-icon"></span></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td><a href="players/player_aaro.html">Aaro</a></td>
                    <td>1933.6</td>
                    <td>68.4</td>
                    <td>74.0%</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><a href="players/player_juho.html">Juho</a></td>
                    <td>1763.2</td>
                    <td>69.5</td>
                    <td>66.67%</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><a href="players/player_jesper.html">Jesper</a></td>
                    <td>1677.0</td>
                    <td>119.88</td>
                    <td>50.0%</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td><a href="players/player_matias.html">Matias</a></td>
                    <td>1480.4</td>
                    <td>160.11</td>
                    <td>42.9%</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td><a href="players/player_jussi.html">Jussi</a></td>
                    <td>1441.6</td>
                    <td>180.0</td>
                    <td>8.3%</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td><a href="players/player_tuomas.html">Tuomas</a></td>
                    <td>1247.3</td>
                    <td>139.74</td>
                    <td>18.8%</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td><a href="players/player_riku.html">Riku</a></td>
                    <td>1159.5</td>
                    <td>124.67</td>
                    <td>11.5%</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        let currentSort = { column: null, direction: 'asc' };

        // Function to sort the table by column index
        function sortTable(n) {
            const table = document.getElementById("leaderboard");
            const rows = Array.from(table.rows).slice(1); // Skip the header row
            let switching = true;
            let shouldSwitch, i, x, y;

            // Determine the default sort direction based on the column
            if (currentSort.column === n) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc'; // Toggle direction
            } else {
                currentSort.column = n;
                currentSort.direction = (n === 0 || n === 3) ? 'asc' : 'desc'; // Default for Rank and RD to ascending, others descending
            }

            // Loop to keep switching rows until no more switching is needed
            while (switching) {
                switching = false;
                for (i = 0; i < rows.length - 1; i++) {
                    shouldSwitch = false;
                    x = rows[i].getElementsByTagName("TD")[n];
                    y = rows[i + 1].getElementsByTagName("TD")[n];

                    // Handle numeric columns (Rating, RD, WL Ratio as percentage)
                    if (n === 2 || n === 3) {
                        if ((currentSort.direction === 'asc' && parseFloat(x.innerHTML) > parseFloat(y.innerHTML)) ||
                            (currentSort.direction === 'desc' && parseFloat(x.innerHTML) < parseFloat(y.innerHTML))) {
                            shouldSwitch = true;
                        }
                    } else if (n === 4) { // WL Ratio
                        if ((currentSort.direction === 'asc' && parseFloat(x.innerHTML.replace('%', '')) > parseFloat(y.innerHTML.replace('%', ''))) ||
                            (currentSort.direction === 'desc' && parseFloat(x.innerHTML.replace('%', '')) < parseFloat(y.innerHTML.replace('%', '')))) {
                            shouldSwitch = true;
                        }
                    } else { // Handle text columns (Player, Rank)
                        if ((currentSort.direction === 'asc' && x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) ||
                            (currentSort.direction === 'desc' && x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase())) {
                            shouldSwitch = true;
                        }
                    }

                    if (shouldSwitch) {
                        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                        switching = true;
                        break;
                    }
                }
            }

            // Update the sort icon direction
            updateSortIcons();
        }

        // Function to update the sort icon next to each header
        function updateSortIcons() {
            const headers = document.querySelectorAll("th");
            headers.forEach((header, index) => {
                const icon = header.querySelector(".sort-icon");
                icon.classList.remove("asc", "desc"); // Reset icons
                if (index === currentSort.column) {
                    icon.classList.add(currentSort.direction);
                }
            });
        }

        // Initialize the default sorting order
        updateSortIcons();
    </script>
</body>
</html>
