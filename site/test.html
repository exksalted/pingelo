<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aaro's Stats</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #212529; /* Really dark gray background */
            color: #d1d1d1; /* Light gray text color */
        }
        .container {
            max-width: 600px;
            margin: auto;
            padding: 20px;
            background: #343a40; /* Slightly lighter dark gray */
            border-radius: 8px; /* Rounded corners */
        }
        h1 {
            text-align: center;
            color: #ffffff; /* White color for the header */
        }
        p {
            font-size: 16px;
            margin: 10px 0;
        }
        p strong {
            color: #007bff; /* Blue color for labels */
        }
        a {
            text-decoration: none;
            color: #007bff; /* Blue color for the link */
        }
        a:hover {
            text-decoration: underline;
        }
        .stats {
            margin-top: 20px;
        }
        .stats p {
            margin: 10px 0;
        }
        .stats strong {
            color: #ffffff; /* White color for stat labels */
        }

        /* Style for section titles like "Rank Stats", "Rating Stats" */
        .stat-title {
            font-size: 20px;
            font-weight: bold;
            color: #ffffff; /* White color for titles */
            margin-top: 20px;
            text-transform: uppercase; /* Makes titles in uppercase */
            border-bottom: 2px solid #007bff; /* Blue underline */
            padding-bottom: 5px;
        }

        /* Adding some space between sections */
        .section {
            margin-bottom: 30px;
        }

        /* Flexbox styling to align stats on the same line */
        .stat-pair {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
        .stat-pair p {
            margin: 0; /* Remove default margin */
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Aaro's Stats</h1>

        <div class="stats">
            <!-- Rank Stats Section -->
            <div class="section">
                <p class="stat-title">Rank Stats:</p>
                <div class="stat-pair">
                    <p><strong>Current Rank:</strong><br><span id="currentRank">Loading...</span></p>
                    <p><strong>Peak Rank:</strong><br><span id="peakRank">Loading...</span></p>
                    <p><strong>Worst Rank:</strong><br><span id="worstRank">Loading...</span></p>
                </div>
            </div>

            <!-- Rating Stats Section -->
            <div class="section">
                <p class="stat-title">Rating Stats:</p>
                <div class="stat-pair">
                    <p><strong>Current Rating:</strong><br><span id="currentRating">Loading...</span></p>
                    <p><strong>Peak Rating:</strong><br><span id="peakRating">Loading...</span></p>
                    <p><strong>Worst Rating:</strong><br><span id="worstRating">Loading...</span></p>
                </div>
            </div>

            <!-- Game Stats Section -->
            <div class="section">
                <p class="stat-title">Game Stats:</p>
                <div class="stat-pair">
                    <p><strong>Games Played:</strong><br><span id="gamesPlayed">Loading...</span></p>
                    <p><strong>Wins:</strong><br><span id="wins">Loading...</span></p>
                    <p><strong>Losses:</strong><br><span id="losses">Loading...</span></p>
                    <p><strong>Win Percentage:</strong><br><span id="winPercentage">Loading...</span></p>
                    <p><strong>Average Points:</strong><br><span id="averagePoints">Loading...</span></p>
                </div>
            </div>

          <!-- Hall of Fame and Shame Section -->
            <div class="section">
                <p class="stat-title">Hall of Fame and Shame:</p>
                <div class="stat-pair">
                    <p><strong>Best Victory:</strong><br><a href="player_jesper.html">Jesper,</a> Rated 2055.6<br><a href="../tournamentfolder/P2D1.html">Pirkkola 2 DE1</a><br>12.1.2025</p>
                    <p><strong>Worst Defeat:</strong><br><a href="player_jussi.html">Jussi,</a> Rated 1332.9<br>1v1 Bo5<br>28.1.2025</p>
                </div>
            </div>

            <!-- Tournament Stats Section -->
            <div class="section">
                <p class="stat-title">Tournament Stats:</p>
                <div class="stat-pair">
                    <p><strong>Best Performance:</strong><br><a href="../tournamentfolder/P2D1.html">Pirkkola 2 DE1</a><br>(1st place)<br>Strength 2148.1</p>
                    <p><strong>Tournaments Played:</strong><br><span id="tournamentsPlayed">Loading...</span></p>
                    <p><strong><a href="ptpages/aarotourney.html">Tournaments Won:</a></strong><br><span id="tournamentsWon">Loading...</span></p>
                </div>
            </div>

           <!-- Matchup Stats Section -->
            <div class="section">
                <p class="stat-title">Matchup Stats:</p>
                <div class="stat-pair">
                    <p><strong>Best WL Matchup:</strong><br><a href="player_riku.html">Riku</a><br>7 - 0</p>
                    <p><strong>Worst WL Matchup:</strong><br><a href="player_juho.html">Juho</a><br>28 - 21</p>
                    <p><strong>Best Point Matchup:</strong><br><a href="player_samuel.html">Samuel</a><br>11.00 - 1.86</p>
                    <p><strong>Worst Point Matchup:</strong><br><a href="player_juho.html">Juho</a><br>9.53 - 8.78</p>
                    <p><strong>Most Played:</strong><br><a href="player_jussi.html">Jussi</a><br>65 games</p>
                </div>
            </div>

        </div>

        <p><a href="../../index.html">Back to Leaderboard</a></p>
    </div>

    <script>
    // Define the player's name (this will be dynamically set based on the page)
    const playerName = "Aaro";  // Update this as needed for different player pages

    // Fetch the CSV file and update the stats
    fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vRJtlTjWV6j8VcWAR67efp2DDbYSWUEuYo1UYIeNCUW8ioBpKqNYZuEXJEOzYktsxQoy4KF74S3Hl-t/pub?gid=1546031711&single=true&output=csv')
        .then(response => response.text())
        .then(data => {
            const rows = data.split('\n');
            const headers = rows[0].split('\t'); // Use tab as the delimiter
            let stats = {};

            // Loop through rows and find the player's stats
            for (let i = 1; i < rows.length; i++) { // Start at 1 to skip header row
                const columns = rows[i].split('\t'); // Use tab as the delimiter

                // Check if the first column (player name) matches the specified player
                if (columns[0].trim() === playerName) {
                    stats = {
                        currentRank: columns[4], // Rank
                        peakRank: columns[6], // Peak Rank
                        worstRank: columns[7], // Lowest Rank
                        currentRating: columns[1], // Rating
                        peakRating: columns[25], // Peak Rating
                        worstRating: columns[26], // Lowest Rating
                        gamesPlayed: columns[27], // Played
                        wins: columns[28], // Won
                        losses: columns[29], // Lost
                        winPercentage: columns[30], // Win%
                        averagePoints: columns[16], // Avg. Points
                        tournamentsPlayed: columns[8], // Tourns. Played
                        tournamentsWon: columns[31], // Tournaments Won
                        bestVictory: `${columns[9]} (${columns[10]})`, // BV Rating and BV Against
                        worstDefeat: `${columns[11]} (${columns[12]})`, // WD Rating and WD Against
                        bestWL: `${columns[19]} (${columns[20]})`, // Best WL Player and BWL Score
                        worstWL: `${columns[21]} (${columns[22]})`, // Worst WL Against and WWL Score
                        mostPlayed: `${columns[23]} (${columns[24]})`, // Most Played P and Most played #
                    };
                    break;
                }
            }

            // If player not found in the data
            if (Object.keys(stats).length === 0) {
                alert('Player not found in the stats data.');
                return;
            }

            // Update the stats dynamically
            document.getElementById('currentRank').textContent = stats.currentRank || 'N/A';
            document.getElementById('peakRank').textContent = stats.peakRank || 'N/A';
            document.getElementById('worstRank').textContent = stats.worstRank || 'N/A';
            document.getElementById('currentRating').textContent = stats.currentRating || 'N/A';
            document.getElementById('peakRating').textContent = stats.peakRating || 'N/A';
            document.getElementById('worstRating').textContent = stats.worstRating || 'N/A';
            document.getElementById('gamesPlayed').textContent = stats.gamesPlayed || 'N/A';
            document.getElementById('wins').textContent = stats.wins || 'N/A';
            document.getElementById('losses').textContent = stats.losses || 'N/A';
            document.getElementById('winPercentage').textContent = stats.winPercentage || 'N/A';
            document.getElementById('averagePoints').textContent = stats.averagePoints || 'N/A';
            document.getElementById('tournamentsPlayed').textContent = stats.tournamentsPlayed || 'N/A';
            document.getElementById('tournamentsWon').textContent = stats.tournamentsWon || 'N/A';

            // Update Hall of Fame and Shame Section
            document.querySelector('.stat-pair p:nth-child(1)').innerHTML = `
                <strong>Best Victory:</strong><br>
                <a href="player_${stats.bestVictory.split(' ')[0].toLowerCase()}.html">${stats.bestVictory.split(' ')[0]}</a>, Rated ${stats.bestVictory.split(' ')[1]}<br>
                <a href="../tournamentfolder/P2D1.html">Pirkkola 2 DE1</a><br>
                12.1.2025
            `;
            document.querySelector('.stat-pair p:nth-child(2)').innerHTML = `
                <strong>Worst Defeat:</strong><br>
                <a href="player_${stats.worstDefeat.split(' ')[0].toLowerCase()}.html">${stats.worstDefeat.split(' ')[0]}</a>, Rated ${stats.worstDefeat.split(' ')[1]}<br>
                1v1 Bo5<br>
                28.1.2025
            `;

            // Update Matchup Stats Section
            document.querySelectorAll('.stat-pair p')[2].innerHTML = `
                <strong>Best WL Matchup:</strong><br>
                <a href="player_${stats.bestWL.split(' ')[0].toLowerCase()}.html">${stats.bestWL.split(' ')[0]}</a><br>
                ${stats.bestWL.split(' ')[1]}
            `;
            document.querySelectorAll('.stat-pair p')[3].innerHTML = `
                <strong>Worst WL Matchup:</strong><br>
                <a href="player_${stats.worstWL.split(' ')[0].toLowerCase()}.html">${stats.worstWL.split(' ')[0]}</a><br>
                ${stats.worstWL.split(' ')[1]}
            `;
            document.querySelectorAll('.stat-pair p')[4].innerHTML = `
                <strong>Most Played:</strong><br>
                <a href="player_${stats.mostPlayed.split(' ')[0].toLowerCase()}.html">${stats.mostPlayed.split(' ')[0]}</a><br>
                ${stats.mostPlayed.split(' ')[1]} games
            `;
        })
        .catch(error => {
            console.error('Error fetching the CSV file:', error);
            alert('There was an error fetching the stats data.');
        });
</script>
</body>
</html>
